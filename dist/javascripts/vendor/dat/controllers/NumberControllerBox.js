define(["dat/controllers/NumberController","dat/dom/dom","dat/utils/common"],function(t,e,i){function n(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var r=function(t,n,s){function o(){var t=parseFloat(d.__input.value);i.isNaN(t)||d.setValue(t)}function a(){o(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function h(t){e.bind(window,"mousemove",u),e.bind(window,"mouseup",l),c=t.clientY}function u(t){var e=c-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),c=t.clientY}function l(){e.unbind(window,"mousemove",u),e.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,r.superclass.call(this,t,n,s);var c,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",h),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,i.extend(r.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():n(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r});