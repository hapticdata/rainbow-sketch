define(["require","exports"],function(t,e){e.extend=function(t,e){if("function"!=typeof t)throw Error("childClass was not function, possible circular: ",t);if("function"!=typeof e)throw Error("superClass was not function, possible circular: ",e);t.prototype=Object.create(e.prototype),t.constructor=t,t.prototype.parent=e.prototype};var i=Array.isArray||function(t){return"[object Array]"==""+t};e.isArray=i;var n=function(t,e){if(void 0===t||"object"!=typeof t)return!1;var i,n=0,r=e.length;for(n=0;r>n;n++)if(i=e[n],!(i in t))return!1;return!0};e.hasProperties=n,e.tests={hasXY:function(t){return n(t,["x","y"])},hasXYZ:function(t){return n(t,["x","y","z"])},hasXYWidthHeight:function(t){return n(t,["x","y","width","height"])},isArray:i,isAABB:function(t){return n(t,["setExtent","getNormalForPoint"])},isCircle:function(t){return n(t,["getCircumference","getRadius","intersectsCircle"])},isLine2D:function(t){return n(t,["closestPointTo","intersectLine","getLength"])},isMatrix4x4:function(t){return n(t,["identity","invert","setFrustrum"])},isRect:function(t){return n(t,["x","y","width","height","getArea","getCentroid","getDimensions"])},isSphere:function(t){return n(t,["x","y","z","radius","toMesh"])},isTColor:function(t){return n(t,["rgb","cmyk","hsv"])},isParticleBehavior:function(t){return n(t,["applyBehavior","configure"])},isVerletParticle2D:function(t){return n(t,["x","y","weight"])}};var r={};e.each=function(t,e,i){if(null!=t)if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e,i);else if(t.length===+t.length){for(var n=0,s=t.length;s>n;n++)if(n in t&&e.call(i,t[n],n,t)===r)return}else for(var o in t)if(hasOwnProperty.call(t,o)&&e.call(i,t[o],o,t)===r)return};var s={};e.bind=function(t,e){var i,n,r=Function.prototype,o=Array.prototype.slice;return t.bind===r.bind&&r.bind?r.bind.apply(t,o.call(arguments,1)):(i=o.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(o.call(arguments)));s.prototype=t.prototype;var r=new s;s.prototype=null;var a=t.apply(r,i.concat(o.call(arguments)));return Object(a)===a?a:r})},e.filter=function(t,i,n){var r=[];return null==t?r:Array.prototype.filter&&t.filter===Array.prototype.filter?t.filter(i,n):(e.each(t,function(t,e,s){i.call(n,t,e,s)&&(r[r.length]=t)}),r)},e.removeItemFrom=function(t,e){var i=e.indexOf(t);return i>-1?e.splice(i,1):void 0},e.mixin=function(t,i){e.each(i,function(e,i){t[i]=e})},e.numberCompare=function(t,e){return t==e?0:e>t?-1:t>e?1:void 0},e.Int32Array="undefined"!=typeof Int32Array?Int32Array:Array,e.Float32Array="undefined"!=typeof Float32Array?Float32Array:Array,function(){var t=function(t){this.__it=t.slice(0)};t.prototype={hasNext:function(){return this.__it.length>0},next:function(){return this.__it.shift()}};var i=function(e){this.__obj={},this.__keys=[];for(var i in e)this.__obj[i]=e[i],this.__keys.push(i);this.__it=new t(this.__keys)};i.prototype={hasNext:function(){return this.__it.hasNext()},next:function(){var t=this.__it.next();return this.__obj[t]}};var n=function(n){return e.isArray(n)?new t(n):new i(n)};e.Iterator=n}(),function(){var t=function(t){this.__list=[],this.__map={},this.__inverseMap={},"function"==typeof t&&(this.generateKey=t)};t.prototype={each:function(t){e.each(this.__map,t)},get:function(t){var e=this,i=function(){return void 0!==e.__inverseMap[t]?t:e.__map[t]},n=i();return void 0===n&&(t=this.generateKey(t),n=i()),n},generateKey:function(t){return""+t},getArray:function(){return this.__list},has:function(t){var e=this,i=function(t){return void 0!==e.__map[t]||void 0!==e.__inverseMap[t]};return i(t)?!0:i(this.generateKey(t))},put:function(t,e){t=this.generateKey(t),this.__map[t]=e,this.__inverseMap[e]=t,this.__list.push(e)},remove:function(t){t=this.get(t);var e=this.__inverseMap[t];return delete this.__inverseMap[t],delete this.__map[e],this.__list.splice(this.__list.indexOf(t),1)[0]},size:function(){return this.__list.length}},e.LinkedMap=t}()});