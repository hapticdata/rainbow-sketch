define(["require","exports","module","./Polygon2D","./vectors"],function(t,e,i){var n=t("./Polygon2D"),r=t("./vectors").Vec2D,s={0:function(t,e,i){var n=e.x+(t.y-e.y)*(i.x-e.x)/(i.y-e.y);return new r(n,t.y)},1:function(t,e,i){var n=t.x+t.width,s=e.y+(n-e.x)*(i.y-e.y)/(i.x-e.x);return new r(n,s)},2:function(t,e,i){var n=t.y+t.height,s=e.x+(n-e.y)*(i.x-e.x)/(i.y-e.y);return new r(s,n)},3:function(t,e,i){var n=e.y+(t.x-e.x)*(i.y-e.y)/(i.x-e.x);return new r(t.x,n)}},o=function(t,e,i,n){return s[e](t,i,n)},a={0:function(t,e){return e.y>=t.y},1:function(t,e){return e.x<t.x+t.width},2:function(t,e){return e.y<t.y+t.height},3:function(t,e){return e.x>=t.x}},h=function(t,e,i){return a[i](t,e)},u=function(t){this.bounds=t};u.prototype={constructor:u,clipPolygon:function(t){var e,i,r,s=t.vertices.slice(0),a=0,u=0,c=s.length-1;for(s.push(s[0]);4>a;a++){for(u=0,c=s.length-1,e=[];c>u;u++)i=s[u],r=s[u+1],h(this.bounds,i,a)?h(this.bounds,r,a)?e.push(r.copy()):e.push(o(this.bounds,a,i,r)):h(this.bounds,r,a)&&(e.push(o(this.bounds,a,i,r)),e.push(r.copy()));e.length>0&&e[0]!==e[e.length-1]&&e.push(e[0]),s=e}return new n(s).removeDuplicates(.001)},getBounds:function(){return this.bounds},isKnownVertex:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i].equalsWithTolerance(e,1e-4))return!0;return!1},setBounds:function(t){this.bounds=t}},i.exports=u});