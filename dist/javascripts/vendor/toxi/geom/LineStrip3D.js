define(["require","exports","module","./vectors","./Line3D","../internals"],function(t,e,n){var i=t("./vectors").Vec3D,r=t("./Line3D"),s=t("../internals"),o=s.tests.hasXYZ,a=s.Iterator,u=function(t){this.vertices=t||[]};u.prototype={constructor:u,add:function(t,e,n){return o(t)?this.vertices.push(new i(t)):this.vertices.push(new i(t,e,n)),this},get:function(t){return 0>t&&(t+=this.vertices.length),this.vertices[t]},getDecimatedVertices:function(t,e){e!==!1&&(e=!0);var n=[];if(3>this.vertices.length){if(2!==this.vertices.length)return;new r(this.vertices[0],this.vertices[1]).splitIntoSegments(n,t,!0),e||n.pop()}var i,s,o,a,u,h,c=this.getEstimatedArcLength(),l=t/c,d=0;for(s=0;1>s;s+=l){for(i=s*c;i>=this.arcLenIndex[d];)d++;o=this.get(d-1),a=this.get(d),u=(i-this.arcLenIndex[d-1])/(this.arcLenIndex[d]-this.arcLenIndex[d-1]),h=o.interpolateTo(a,u),n.push(h)}return e&&n.push(this.get(-1).copy()),n},getEstimatedArcLength:function(){(void 0===this.arcLenIndex||this.arcLenIndex.length!==this.vertices.length)&&(this.arcLenIndex=[0]);for(var t,e,n=0,i=1,r=this.vertices.length;r>i;i++)t=this.vertices[i-1],e=this.vertices[i],n+=t.distanceTo(e),this.arcLenIndex[i]=n;return n},getSegments:function(){for(var t=1,e=this.vertices.length,n=[];e>t;t++)n.push(new r(this.get(t-1),this.get(t)));return n},getVertices:function(){return vertices},iterator:function(){return new a(this.vertices)},setVertices:function(t){this.vertices=t}},n.exports=u});