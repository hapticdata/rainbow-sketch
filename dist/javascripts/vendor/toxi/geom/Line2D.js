define(["require","exports","module","./Ray2D","../internals"],function(t,e,n){var i=t("./Ray2D"),r=t("../internals"),s=function(t,e){this.a=t,this.b=e};s.prototype={closestPointTo:function(t){var e=this.b.sub(this.a),n=t.sub(this.a).dot(e)/e.magSquared();return 0>n?this.a.copy():n>1?this.b.copy():this.a.add(e.scaleSelf(n))},copy:function(){return new s(this.a.copy(),this.b.copy())},equals:function(t){if(this==t)return!0;if(!r.tests.isLine2D(t))return!1;var e=t;return(this.a.equals(e.a)||this.a.equals(e.b))&&(this.b.equals(e.b)||this.b.equals(e.a))},getDirection:function(){return this.b.sub(this.a).normalize()},getLength:function(){return this.a.distanceTo(this.b)},getLengthSquared:function(){return this.a.distanceToSquared(this.b)},getMidPoint:function(){return this.a.add(this.b).scaleSelf(.5)},getNormal:function(){return this.b.sub(this.a).perpendicular()},getTheta:function(){return this.a.angleBetween(this.b,!0)},hasEndPoint:function(t){return this.a.equals(t)||this.b.equals(t)},intersectLine:function(t){var e,n=(t.b.y-t.a.y)*(this.b.x-this.a.x)-(t.b.x-t.a.x)*(this.b.y-this.a.y),i=(t.b.x-t.a.x)*(this.a.y-t.a.y)-(t.b.y-t.a.y)*(this.a.x-t.a.x),r=(this.b.x-this.a.x)*(this.a.y-t.a.y)-(this.b.y-this.a.y)*(this.a.x-t.a.x);if(0!==n){var o=i/n,a=r/n;e=o>=0&&1>=o&&a>=0&&1>=a?new s.LineIntersection(s.LineIntersection.Type.INTERSECTING,this.a.interpolateTo(this.b,o)):new s.LineIntersection(s.LineIntersection.Type.NON_INTERSECTING,void 0)}else e=0===i&&0===r?new s.LineIntersection(s.LineIntersection.Type.COINCIDENT,void 0):new s.LineIntersection(s.LineIntersection.Type.COINCIDENT,void 0);return e},offsetAndGrowBy:function(t,e,n){var i=this.getMidPoint(),r=this.getDirection(),s=r.getPerpendicular();return void 0!==n&&0>i.sub(n).dot(s)&&s.invert(),s.normalizeTo(t),this.a.addSelf(s),this.b.addSelf(s),r.scaleSelf(e),this.a.subSelf(r),this.b.addSelf(r),this},scale:function(t){var e=.5*(1-t),n=this.a.interpolateTo(this.b,e);return this.b.interpolateToSelf(this.a,e),this.a.set(n),this},set:function(t,e){return this.a=t,this.b=e,this},splitIntoSegments:function(t,e,n){return s.splitIntoSegments(this.a,this.b,e,t,n)},toRay2D:function(){return new i(this.a.copy(),this.b.sub(this.a).normalize())}},s.splitIntoSegments=function(t,e,n,i,r){void 0===i&&(i=[]),r&&i.push(t.copy());var s=t.distanceTo(e);if(s>n)for(var o=t.copy(),a=e.sub(t).limit(n);s>n;)o.addSelf(a),i.push(o.copy()),s-=n;return i.push(e.copy()),i},s.LineIntersection=function(t,e){this.type=t,this.pos=e},s.LineIntersection.prototype={getPos:function(){return this.pos.copy()},getType:function(){return this.type},toString:function(){return"type: "+this.type+" pos: "+this.pos}},s.LineIntersection.Type={COINCIDENT:0,PARALLEL:1,NON_INTERSECTING:2,INTERSECTING:3},n.exports=s});