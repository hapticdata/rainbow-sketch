define(["../../internals"],function(t){var e=function(){this.buffer=[]};e.prototype.append=function(t){return this.buffer.push(t),this},e.prototype.toString=function(){return this.buffer.join("")};var i=function(){this.VERSION="0.3",this.__stringBuffer=new e,this.objStream=void 0,this.__filename="objwriter.obj",this._numVerticesWritten=0,this._numNormalsWritten=0};return i.prototype={beginSave:function(e){"string"==typeof e||t.hasProperties(e,["write","end","writable"]&&e.writable)&&(this.objStream=e),this._handleBeginSave()},endSave:function(){if(void 0!==this.objStream)try{this.objStream.destroy()}catch(t){}},face:function(t,e,i){this.__stringBuffer.append("f "+t+" "+e+" "+i+"\n")},faceList:function(){this.__stringBuffer.append("s off \n")},faceWithNormals:function(t,e,i,n,r,s){this.__stringBuffer.append("f "+t+"//"+n+" "+e+"//"+r+" "+i+"//"+s+"\n")},getCurrNormalOffset:function(){return this._numNormalsWritten},getCurrVertexOffset:function(){return this._numVerticesWritten},getOutput:function(){return""+this.__stringBuffer},_handleBeginSave:function(){this.numVerticesWritten=0,this.numNormalsWrittern=0,this.__stringBuffer.append("# generated by OBJExport (js) v"+this.VERSION+"\n")},newObject:function(t){this.__stringBuffer.append("o "+t+"\n")},normal:function(t){this.__stringBuffer.append("vn "+t.x+" "+t.y+" "+t.z+"\n"),this._numNormalsWritten++},vertex:function(t){this.__stringBuffer.append("v "+t.x+" "+t.y+" "+t.z+"\n"),this._numVerticesWritten++}},i});