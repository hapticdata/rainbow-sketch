define(["require","../internals","./mesh/meshCommon","./Vec3D","../math/mathUtils","./Vec3D","../internals"],function(t){var e,i;return function(){var n=t("../internals"),r=t("./mesh/meshCommon"),s=t("./Vec3D");e=function(t,e){void 0===t?(s.apply(this,[new s]),this.radius=1):n.tests.hasXYZ(t)?(s.apply(this,[t]),this.radius=n.tests.isSphere(t)?t.radius:e):(s.apply(this,[new s]),this.radius=t)},n.extend(e,s),e.prototype.containsPoint=function(t){var e=this.sub(t).magSquared();return this.radius*this.radius>=e},e.prototype.intersectRay=function(t){var e,i,n,r,s=t.sub(this),o=s.magSquared(),a=-s.dot(t.getDirection()),h=this.radius*this.radius-(o-a*a);return h>=0&&(h=Math.sqrt(h),i=a+h,n=a-h,0>i&&0>n||(i>0&&n>0?i>n&&(r=i,i=n,n=r):n>0&&(r=i,i=n,n=r)),e=[i,n]),e},e.prototype.intersectSphereTriangle=function(t,e){e.set(t.closestPointOnSurface(this));var i=e.sub(this);return i.magSquared()<=this.radius*this.radius},e.prototype.tangentPlaneNormalAt=function(t){return this.sub(t).normalize()},e.prototype.toMesh=function(){var t={mesh:void 0,resolution:0};1===arguments.length?"object"==typeof arguments[0]?(t.mesh=arguments[0].mesh,t.resolution=arguments[0].res||arguments[0].resolution):t.resolution=arguments[0]:(t.mesh=arguments[0],t.resolution=arguments[1]);var e=new r.SurfaceMeshBuilder(new i(this));return e.createMesh(t.mesh,t.resolution,1)}}(),function(e){var n=t("../math/mathUtils"),r=t("./Vec3D"),s=t("../internals");i=function(t){void 0===t&&(this.sphere=new e(new r,1)),this.sphere=s.tests.isSphere(t)?t:new e(new r,t),this.phiRange=n.PI,this.thetaRange=n.TWO_PI},i.prototype={computeVertexFor:function(t,e,i){e-=n.HALF_PI;var r=n.cos(e),s=n.cos(i),o=n.sin(e),a=n.sin(i),h=n.sign(r)*n.abs(r);return t.x=h*n.sign(s)*n.abs(s),t.y=n.sign(o)*n.abs(o),t.z=h*n.sign(a)*n.abs(a),t.scaleSelf(this.sphere.radius).addSelf(this.sphere)},getPhiRange:function(){return this.phiRange},getPhiResolutionLimit:function(t){return t},getThetaRange:function(){return this.thetaRange},getThetaResolutionLimit:function(t){return t},setMaxPhi:function(t){this.phiRange=n.min(t/2,n.PI)},setMaxTheta:function(t){this.thetaRange=n.min(t,n.TWO_PI)}}}(e),e.SphereFunction=i,e});