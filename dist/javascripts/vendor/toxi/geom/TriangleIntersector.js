define(["../math/mathUtils","./Triangle3D","./Vec3D","./IsectData3D"],function(t,e,i,n){var r=function(t){this.triangle=t||new e,this.isectData=new n};return r.prototype={getIntersectionData:function(){return this.isectData},getTriangle:function(){return this.triangle},intersectsRay:function(e){this.isectData.isIntersection=!1;var i=this.triangle.computeNormal(),n=i.dot(e.dir);if(0>n){var r=e.sub(this.triangle.a),s=-(i.x*r.x+i.y*r.y+i.z*r.z)/(i.x*e.dir.x+i.y*e.dir.y+i.z*e.dir.z);if(s>=t.EPS){var o=e.getPointAtDistance(s);this.triangle.containsPoint(o)&&(this.isectData.isIntersection=!0,this.isectData.pos=o,this.isectData.normal=i,this.isectData.dist=s,this.isectData.dir=this.isectData.pos.sub(e).normalize())}}return this.isectData.isIntersection},setTriangle:function(t){return this.triangle=t,this}},r});