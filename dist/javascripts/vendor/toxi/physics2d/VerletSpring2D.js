define(["require","exports","module"],function(t,e,i){var n=function(t,e,i,n){this.a=t,this.b=e,this.restLength=i,this.strength=n};n.EPS=1e-6,n.prototype={getRestLength:function(){return this.restLength},getStrength:function(){return this.strength},lockA:function(t){return this.isALocked=t,this},lockB:function(t){return this.isALocked=t,this},setRestLength:function(t){return this.restLength=t,this.restLengthSquared=t*t,this},setStrength:function(t){return this.strength=t,this},update:function(t){var e=this.b.sub(this.a),i=e.magnitude()+n.EPS,s=(i-this.restLength)/(i*(this.a.invWeight+this.b.invWeight))*this.strength;this.a.isLocked||this.isALocked||(this.a.addSelf(e.scale(s*this.a.invWeight)),t&&this.a.applyConstraints()),this.b.isLocked||this.isBLocked||(this.b.addSelf(e.scale(-s*this.b.invWeight)),t&&this.b.applyConstraints())}},i.exports=n});