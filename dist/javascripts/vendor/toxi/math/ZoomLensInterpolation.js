define(["require","exports","module","./mathUtils","./CircularInterpolation"],function(t,e,i){var n=t("./mathUtils"),s=t("./CircularInterpolation"),r=function(t,e){this.leftImpl=new s,this.rightImpl=new s,this.lensPos=t||.5,this.lensStrength=e||1,this.absStrength=Math.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(0>this.lensStrength)};r.prototype={interpolate:function(t,e,i){var n=t+(e-t)*i;return n+=this.lensPos>i?(this.leftImpl.interpolate(t,t+(e-t)*this.lensPos,i/this.lensPos)-n)*this.absStrength:(this.rightImpl.interpolate(t+(e-t)*this.lensPos,e,(i-this.lensPos)/(1-this.lensPos))-n)*this.absStrength},setLensPos:function(t,e){this.lensPos+=(n.clipNormalized(t)-this.lensPos)*e},setLensStrength:function(t,e){this.lensStrength+=(n.clip(t,-1,1)-this.lensStrength)*e,this.absStrength=n.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(0>this.lensStrength)}},i.exports=r});