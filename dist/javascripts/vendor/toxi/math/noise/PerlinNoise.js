define(["require","../SinCosLUT"],function(t){var e=t("../SinCosLUT"),i={};i.pow=Math.pow,i.random=Math.random,function(t,e,i,n,r,s,o){function a(t){var e,n,r=this,s=t.length,o=0,a=r.i=r.j=r.m=0;for(r.S=[],r.c=[],s||(t=[s++]);i>o;)r.S[o]=o++;for(o=0;i>o;o++)e=r.S[o],a=c(a+e+t[o%s]),n=r.S[a],r.S[o]=n,r.S[a]=e;r.g=function(t){var e=r.S,n=c(r.i+1),s=e[n],o=c(r.j+s),a=e[o];e[n]=a,e[o]=s;for(var h=e[c(s+a)];--t;)n=c(n+1),s=e[n],o=c(o+s),a=e[o],e[n]=a,e[o]=s,h=h*i+e[c(s+a)];return r.i=n,r.j=o,h},r.g(i)}function h(t,e,i,n,r){if(i=[],r=typeof t,e&&"object"==r)for(n in t)if(5>n.indexOf("S"))try{i.push(h(t[n],e-1))}catch(s){}return i.length?i:t+("string"!=r?"\0":"")}function u(t,e,i,n){for(t+="",i=0,n=0;t.length>n;n++)e[c(n)]=c((i^=19*e[c(n)])+t.charCodeAt(n));t="";for(n in e)t+=String.fromCharCode(e[n]);return t}function c(t){return t&i-1}e.seedrandom=function(c,l){var d,f=[];return c=u(h(l?[c,t]:arguments.length?c:[(new Date).getTime(),t,window],3),f),d=new a(f),u(d.S,t),e.random=function(){for(var t=d.g(n),e=o,a=0;r>t;)t=(t+a)*i,e*=i,a=d.g(1);for(;t>=s;)t/=2,e/=2,a>>>=1;return(t+a)/e},c},o=e.pow(i,n),r=e.pow(2,r),s=2*r,u(e.random(),t)}([],i,256,6,52);var n=4,r=1<<n,s=8,o=1<<s,a=4095,h=.001,u=function(t,e){var i=(e+.5)*t._perlin_PI%t._perlin_TWOPI;return.5*(1-t._perlin_cosTable[i])},c=function(){this._perlin_octaves=4,this._perlin_amp_falloff=.5};return c.prototype={noise:function(t,c,l){var d=0;if(t=t||0,c=c||0,l=l||0,!this._perlin)for(this._perlin=[],d=0;a+1>d;d++)this._perlin[d]=i.random();this._perlin_cosTable=e.getDefaultInstance().getSinLUT(),this._perlin_TWOPI=this._perlin_PI=e.getDefaultInstance().getPeriod(),this._perlin_PI>>=1,0>t&&(t=-t),0>c&&(c=-c),0>l&&(l=-l);var f,p,m,g,y,x,v=t,_=c,b=l,w=t-v,S=c-_,A=l-b,M=0,E=.5;for(d=0;this._perlin_octaves>d&&(x=v+(_<<n)+(b<<s),f=u(this,w),p=u(this,S),m=this._perlin[x&a],m+=f*(this._perlin[x+1&a]-m),g=this._perlin[x+r&a],g+=f*(this._perlin[x+r+1&a]-g),m+=p*(g-m),x+=o,g=this._perlin[x&a],g+=f*(this._perlin[x+1&a]-g),y=this._perlin[x+r&a],y+=f*(this._perlin[x+r+1&a]-y),g+=p*(y-g),m+=u(this,A)*(g-m),M+=m*E,E*=this._perlin_amp_falloff,!(h>E));d++)v<<=1,w*=2,_<<=1,S*=2,b<<=1,A*=2,w>=1&&(v++,w--),S>=1&&(_++,S--),A>=1&&(b++,A--);return M},noiseDetail:function(t,e){t>0&&(this._perlin_octaves=t),e&&e>0&&(this._perlin_amp_falloff=e)},noiseSeed:function(t){i.seedrandom(t)}},c});