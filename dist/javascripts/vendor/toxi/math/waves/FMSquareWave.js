define(["require","exports","module","../../internals","./AbstractWave","./ConstantWave"],function(t,e,i){var n=t("../../internals").extend,s=t("./AbstractWave"),r=t("./ConstantWave"),o=function(t,e,i,n,o){"number"==typeof i?void 0===o?s.apply(this,[t,e,i,n,new r(0)]):(s.apply(this,[t,e,i,n]),this.fmod=o):(s.apply(this,[t,e]),this.fmod=i)};n(o,s),o.prototype.getClass=function(){return"FMSquareWave"},o.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},o.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},o.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},o.prototype.update=function(){return this.value=(.5>this.phase/s.TWO_PI?1:-1)*this.amp+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},i.exports=o});